<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Design Studio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="13.5" cy="6.5" r="2.5"/>
          <circle cx="19" cy="17" r="2"/>
          <circle cx="6" cy="18" r="3"/>
          <path d="M12 9v6"/>
          <path d="M9.5 16.5L6 18"/>
          <path d="M14.5 9L18 15"/>
        </svg>
        <h1>Design Studio</h1>
      </div>
      <div class="header-right">
        <button id="github-btn" class="btn btn-icon" title="GitHub">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
          </svg>
        </button>
        <button id="settings-btn" class="btn btn-icon" title="Settings">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h2>Themes</h2>
          <button id="new-theme-btn" class="btn btn-icon" title="New Theme">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>
        <div class="sidebar-search">
          <input type="search" id="theme-search" placeholder="Search themes...">
        </div>
        <div class="theme-list" id="theme-list">
          <!-- Themes populated by JS -->
        </div>
      </aside>

      <!-- Resize Handle -->
      <div class="resize-handle" id="sidebar-resize"></div>

      <!-- Center Panel -->
      <div class="center-panel">
        <!-- Editor -->
        <div class="editor-panel" id="editor-panel">
          <div class="panel-tabs">
            <button class="tab active" data-tab="tokens">tokens.json</button>
            <button class="tab" data-tab="variables">variables.css</button>
            <button class="tab" data-tab="components">components.css</button>
          </div>
          <div class="editor-container" id="editor-container"></div>
        </div>

        <!-- Resize Handle -->
        <div class="resize-handle horizontal" id="editor-resize"></div>

        <!-- Preview -->
        <div class="preview-panel" id="preview-panel">
          <div class="preview-toolbar">
            <div class="preview-tabs">
              <button class="tab active" data-preview="buttons">Buttons</button>
              <button class="tab" data-preview="inputs">Inputs</button>
              <button class="tab" data-preview="cards">Cards</button>
              <button class="tab" data-preview="typography">Typography</button>
            </div>
            <div class="viewport-buttons">
              <button class="btn btn-icon active" data-viewport="desktop" title="Desktop">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="2" y="3" width="20" height="14" rx="2"/>
                  <line x1="8" y1="21" x2="16" y2="21"/>
                  <line x1="12" y1="17" x2="12" y2="21"/>
                </svg>
              </button>
              <button class="btn btn-icon" data-viewport="tablet" title="Tablet">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="4" y="2" width="16" height="20" rx="2"/>
                  <line x1="12" y1="18" x2="12" y2="18"/>
                </svg>
              </button>
              <button class="btn btn-icon" data-viewport="mobile" title="Mobile">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="5" y="2" width="14" height="20" rx="2"/>
                  <line x1="12" y1="18" x2="12" y2="18"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="preview-frame-wrapper">
            <iframe id="preview-frame" sandbox="allow-scripts"></iframe>
          </div>
        </div>
      </div>

      <!-- Resize Handle -->
      <div class="resize-handle" id="chat-resize"></div>

      <!-- Chat Panel -->
      <aside class="chat-panel" id="chat-panel">
        <div class="chat-header">
          <h2>Claude Assistant</h2>
          <div class="chat-actions">
            <button id="api-key-btn" class="btn btn-icon" title="API Key">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
              </svg>
            </button>
            <button id="clear-chat-btn" class="btn btn-icon" title="Clear Chat">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3,6 5,6 21,6"/>
                <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6M8,6V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="chat-messages" id="chat-messages">
          <div class="chat-empty" id="chat-empty">
            <p>Start a conversation with Claude</p>
            <p class="text-muted">Share screenshots, paste URLs, or ask for design help.</p>
          </div>
        </div>
        <div class="chat-input-area">
          <div class="attachments" id="attachments"></div>
          <div class="chat-input-wrapper">
            <textarea id="chat-input" placeholder="Ask Claude about your design system..." rows="3"></textarea>
            <div class="chat-input-actions">
              <button id="attach-image-btn" class="btn btn-icon" title="Attach Image">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <path d="M21 15l-5-5L5 21"/>
                </svg>
              </button>
              <button id="attach-url-btn" class="btn btn-icon" title="Add URL">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                </svg>
              </button>
            </div>
          </div>
          <button id="send-btn" class="btn btn-primary">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22,2 15,22 11,13 2,9"/>
            </svg>
            Send
          </button>
        </div>
      </aside>
    </main>
  </div>

  <!-- API Key Modal -->
  <dialog id="api-key-modal" class="modal">
    <div class="modal-content">
      <h3>Anthropic API Key</h3>
      <p class="text-muted">Your key is stored locally in your browser.</p>
      <input type="password" id="api-key-input" placeholder="sk-ant-...">
      <div class="modal-actions">
        <button id="api-key-clear" class="btn btn-secondary">Remove Key</button>
        <button id="api-key-save" class="btn btn-primary">Save</button>
      </div>
    </div>
  </dialog>

  <!-- Settings Modal -->
  <dialog id="settings-modal" class="modal">
    <div class="modal-content">
      <h3>Settings</h3>
      <div class="setting-row">
        <label for="editor-theme">Editor Theme</label>
        <select id="editor-theme">
          <option value="vs-dark">Dark</option>
          <option value="vs-light">Light</option>
        </select>
      </div>
      <div class="modal-actions">
        <button id="settings-close" class="btn btn-primary">Close</button>
      </div>
    </div>
  </dialog>

  <!-- Hidden file input -->
  <input type="file" id="file-input" accept="image/*" multiple hidden>

  <!-- Monaco Editor from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>

  <!-- App Scripts -->
  <script src="js/themes.js"></script>
  <script src="js/claude.js"></script>
  <script src="js/editor.js"></script>
  <script src="js/preview.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
